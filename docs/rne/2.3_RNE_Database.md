# 2.3 – Construction quotidienne de la base RNE consolidée

## 1. Objectif
Expliquer comment la base consolidée RNE (SQLite) est créée et versionnée.

## 2. Input utilisés
- Stock RNE (optionnel après première exécution)
- Flux RNE depuis MinIO
- `latest_rne_date.json`

## 3. Vue d’ensemble du DAG `fill_rne_database`
- Nettoyage initial
- Lecture de la dernière date
- Chargement du stock (si nécessaire)
- Chargement des flux utiles
- Consolidation / Parsing
- Déduplication
- Validation
- Export SQLite + gzip
- Mise à jour des métadonnées
- Nettoyage final

## 4. Artefacts générés
- `rne_<date>.db.gz`
- `latest_rne_date.json`

## 5. Règles de versionning
- Nom basé sur dernier flux appliqué
- Gestion du flux J0
- Conservation sur MinIO

## 6. Points critiques
- Qualité des JSON
- Volume (stock vs flux)
- Cohérence date / index
